<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全部商品</title>
    
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bytesized&family=Faustina:ital,wght@0,300..800;1,300..800&family=LXGW+WenKai+TC&family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/style2.css">
    <link rel="icon" type="image/png" href="./image/logoweb.png">
  <link rel="shortcut icon" href="./image/logoweb.png">

</head>
<body>
  <!-- Header -->
<header>
  <div class="header-top">
    <a href="index.html" class="logo-link">
      <div class="logo">
       <img src="image/logo.png" alt="Logo">
        <div class="brand-name">
          <p class="main-title">咬一圈</p>
          <p class="sub-title">貝果甜甜圈專賣店</p>
        </div>
      </div>
     </a>

  <div class="icons">
    <a href="member.html">
      <img src="image/member.png" alt="會員" class="icon" />
    </a>
    <a href="cart.html">
      <img src="image/cart.png" alt="購物車" class="icon" />
    </a>
    <a href="#" id="search-icon">
      <img src="image/search.png" alt="搜尋" class="icon" />
    </a>
    <input type="text" id="search-input" placeholder="搜尋..." class="search-box" style="display:none;" />
  </div>
</div>



  <!-- 導覽列 -->
<nav>
  <ul class="nav-links">
    <li class="dropdown">
      <a href="#">會員資訊</a>
      <ul class="submenu">
        <li><a href="login.html">會員登入/註冊</a></li>
        <li><a href="member.html">會員中心</a></li>
        <li><a href="favorite.html">我的最愛</a></li>
      </ul>
    </li>
    <li><a href="communication.html">聯絡我們</a></li>

    <li class="dropdown">
      <a href="#">關於</a>
      <ul class="submenu">
        <li><a href="about_us.html">關於我們</a></li>
        <li><a href="team.html">創辦人</a></li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="#">常見問題</a>
      <ul class="submenu">
        <li><a href="shopping_guide.html">購物須知</a></li>
        <li><a href="order_qa.html">訂單 Q&A</a></li>
        <li><a href="storage_heating.html">商品保存與加熱方式</a></li>
      </ul>
    </li>
    <li class="dropdown">
      <a href="#">商品列表</a>
      <ul class="submenu">
        <li><a href="products.html?category=all">全部商品</a></li>
        <li><a href="products.html?category=bagel">貝果</a></li>
        <li><a href="products.html?category=donut">甜甜圈</a></li>
        <li><a href="products.html?category=gift">禮盒</a></li>
      </ul>
    </li>
  </ul>
</nav>
</header>

  <div class="content-container"> 
    <main class="product-page">
      <h1>商品分類</h1>
      <div class="category-buttons">
        <button data-category="全部" onclick="renderCategoryUI(this)">全部</button>
        <button data-category="bagel" onclick="renderCategoryUI(this)">貝果</button>
        <button data-category="donut" onclick="renderCategoryUI(this)">甜甜圈</button>
        <button data-category="gift" onclick="renderCategoryUI(this)">禮盒</button>
      </div>
      <div class="product-list" id="product-list"></div> <!-- ✅ 只保留一個 -->
    </main>
  </div>
  <!-- Footer -->
<footer class="site-footer">
  <div class="footer-container">

    <!-- 區塊 1：關於我們 -->
    <div class="footer-section">
      <h3>關於我們</h3>
      <ul>
        <li><a href="privacy_page.html">隱私權政策</a></li>
        <li><a href="return_policy.html">退換貨政策</a></li>
        <li><a href="locations.html">工作室據點</a></li>
      </ul>
    </div>

    <!-- 區塊 2：會員服務 -->
    <div class="footer-section">
      <h3>會員服務</h3>
      <ul>
        <li><a href="shopping_guide.html">購物須知</a></li>
        <li><a href="order_qa.html">訂單 Q&A</a></li>
        <li><a href="storage_heating.html">商品保存&加熱方式</a></li>
      </ul>
    </div>

    <!-- 區塊 3：聯絡方式 -->
    <div class="footer-section">
      <h3>聯絡方式</h3>
      <ul>
        <li>客服專線 | <a href="tel:0800-000-123">0800-000-123</a></li>
        <li>客服信箱 | <a href="yaoyiquan.bagel@gmail.com">yaoyiquan.bagel@gmail.com</a></li>
        <li>客服 | <a href="https://line.me/R/ti/p/line帳號" target="_blank">咬一圈官方Line</a></li>
        <li>客服時間 | 週一至週五 10:00 - 18:00</li>
      </ul>
    </div>
  </div>

  <!-- 區塊 4：版權聲明 -->
  <div class="footer-bottom">
    <p> 咬一圈 &copy; 2025 All Right Reserved.</p>
  </div>
</footer>

<script>
  const products = [
    {
      id: 101,
      name: "藍莓雪酪減醣貝果",
      price: 80,
      image: "image/bagel01.png",
      category: "bagel"
    },
    {
      id: 102,
      name: "重乳酪起司減醣貝果",
      price: 85,
      image: "image/bagel02.png",
      category: "bagel"
    },
    {
      id: 103,
      name: "藍莓優格丁減醣貝果",
      price: 80,
      image: "image/bagel03.png",
      category: "bagel"
    },
    {
      id: 104,
      name: "東方美人茶花生減醣貝果",
      price: 75,
      image: "image/bagel04.png",
      category: "bagel"
    },
    {
      id: 105,
      name: "玫瑰洛神乳酪減醣貝果",
      price: 90,
      image: "image/bagel05.png",
      category: "bagel"
    },
    {
      id: 106,
      name: "奶油香蒜減醣貝果",
      price: 75,
      image: "image/bagel06.png",
      category: "bagel"
    },
    {
      id: 107,
      name: "抹茶紅豆乳酪減醣貝果",
      price: 85,
      image: "image/bagel07.png",
      category: "bagel"
    },
    {
      id: 108,
      name: "紫心地瓜減醣貝果",
      price: 85,
      image: "image/bagel08.jpg",
      category: "bagel"
    },
    {
      id: 109,
      name: "蜜香無花果乳酪減醣貝果",
      price: 90,
      image: "image/bagel09.jpg",
      category: "bagel"
    },
    {
      id: 110,
      name: "海鹽焦糖乳酪減醣貝果",
      price: 90,
      image: "image/bagel10.jpg",
      category: "bagel"
    },
    {
      id: 111,
      name: "繽紛草莓甜甜圈",
      price: 55,
      image: "image/donut01.png",
      category: "donut"
    },
    {
      id: 112,
      name: "檸檬甜星",
      price: 60,
      image: "image/donut02.png",
      category: "donut"
    },
    {
      id: 113,
      name: "杏仁白巧克力甜甜圈",
      price: 50,
      image: "image/donut03.png",
      category: "donut"
    },
    {
      id: 114,
      name: "抹茶甜甜圈",
      price: 45,
      image: "image/donut04.png",
      category: "donut"
    },
    {
      id: 115,
      name: "百香果派對",
      price: 60,
      image: "image/donut05.jpg",
      category: "donut"
    },
    {
      id: 116,
      name: "可可餅乾甜甜圈",
      price: 55,
      image: "image/donut06.jpg",
      category: "donut"
    },
    {
      id: 117,
      name: "巧克力夾心甜甜圈",
      price: 50,
      image: "image/donut07.jpg",
      category: "donut"
    },
    {
      id: 118,
      name: "花生糖霜甜甜圈",
      price: 50,
      image: "image/donut08.jpg",
      category: "donut"
    },
    {
      id: 119,
      name: "草莓糖霜甜甜圈",
      price: 50,
      image: "image/donut09.jpg",
      category: "donut"
    },
    {
      id: 120,
      name: "葡萄香檳浪花",
      price: 60,
      image: "image/donut10.jpg",
      category: "donut"
    },
    {
      id: 121,
      name: "原味糖霜甜甜圈6入",
      price: 220,
      image: "image/gift01.png",
      category: "gift"
    },
    {
      id: 122,
      name: "綜合甜甜圈6入",
      price: 260,
      image: "image/gift02.png",
      category: "gift"
    },
    {
      id: 123,
      name: "原味糖霜甜甜圈12入",
      price: 400,
      image: "image/gift03.png",
      category: "gift"
    },
    {
      id: 124,
      name: "綜合甜甜圈12入",
      price: 460,
      image: "image/gift04.png",
      category: "gift"
    },
  ];

  // ==============================
  // 將商品加入購物車
  // ==============================
  function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    const existing = cart.find(item => item.id === productId);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ ...product, quantity: 1 });
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    alert(`已加入購物車：${product.name}`);
  }

  // ==============================
  // 渲染分類頁面產品卡片
  // ==============================
  function renderCategory(categoryName) {
    const container = document.getElementById("product-list");
    const filtered = categoryName === "全部"
      ? products
      : products.filter(p => p.category === categoryName);

    container.innerHTML = filtered.map(p => `
      <div class="product-card">
        <a href="shop.html?id=${p.id}">
          <div class="product-image-wrapper">
            <img src="${p.image}" alt="${p.name}">
          </div>
          <h3>${p.name}</h3>
          <p>NT$ ${p.price}</p>
        </a>
        <button class="add-to-cart-btn" data-id="${p.id}">加入購物車</button>
      </div>
    `).join('');

    // 綁定每張卡片的加入購物車按鈕事件
    document.querySelectorAll(".add-to-cart-btn").forEach(btn => {
      btn.addEventListener("click", (e) => {
        const id = parseInt(e.target.getAttribute("data-id"));
        addToCart(id);
      });
    });
  }

  // ==============================
  // 點擊分類按鈕後切換類別
  // ==============================
  function renderCategoryUI(button) {
    const categoryName = button.getAttribute("data-category");

    document.querySelectorAll('.category-buttons button').forEach(btn => {
      btn.classList.remove('active');
    });
    button.classList.add('active');

    renderCategory(categoryName);
  }

  // ==============================
  // 載入時解析網址分類參數 & 自動點擊對應按鈕
  // ==============================
  document.addEventListener("DOMContentLoaded", () => {
    const urlParams = new URLSearchParams(window.location.search);
    const rawCategory = urlParams.get("category");
    console.log("網址帶入 category =", rawCategory);
    const categoryFromUrl = rawCategory ? decodeURIComponent(rawCategory) : "全部";

    const button = document.querySelector(`.category-buttons button[data-category="${categoryFromUrl}"]`);
    if (button) {
      button.click();
    } else {
      renderCategory("全部");
    }
  });

  // ==============================
  //  搜尋圖示點擊顯示/隱藏搜尋欄
  // =============================
  document.getElementById("search-icon").addEventListener("click", function () {
    const searchInput = document.getElementById("search-input");
    if (searchInput.style.display === "none" || searchInput.style.display === "") {
      searchInput.style.display = "block";
      searchInput.focus();
    } else {
      searchInput.style.display = "none";
    }
  });
</script>

</body>
</html>